<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tafsiir App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#14b8a6',
            dark: '#020617'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-dark text-white min-h-screen">

  <!-- App Container -->
  <div class="max-w-md mx-auto px-4 py-4 pb-24">

    <!-- Header -->
    <header class="flex items-center gap-3 mb-4">
      <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center font-bold text-black">
        T
      </div>
      <div>
        <h1 class="text-xl font-bold">Tafsiir App</h1>
        <p class="text-xs text-gray-400">Qur'an Tafsiir Audio</p>
      </div>
    </header>

    <!-- Search -->
    <input
      id="search"
      type="text"
      placeholder="Search tafsiir..."
      class="w-full mb-4 px-4 py-2 rounded-full bg-slate-900 border border-slate-700 text-sm focus:outline-none focus:border-primary"
    />

    <!-- Grid -->
    <main id="grid" class="grid grid-cols-2 gap-3"></main>

  </div>

  <!-- Mini Player -->
  <div
    id="player"
    class="fixed bottom-4 left-1/2 -translate-x-1/2 w-[95%] max-w-md hidden"
  >
    <div class="bg-slate-900 border border-slate-700 rounded-full px-4 py-2 flex items-center gap-3">
      <button
        id="playPause"
        class="w-9 h-9 rounded-full bg-primary text-black flex items-center justify-center"
      >
        ▶
      </button>
      <div class="overflow-hidden">
        <p id="nowTitle" class="text-sm font-semibold truncate">—</p>
        <p id="nowMeta" class="text-xs text-gray-400">Paused</p>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    const data = [
      {
        id: 1,
        title: "Tafsiir Al-Faatiha",
        sheikh: "Sheikh Example",
        audio: "audio/faatiha.mp3",
        image: "https://images.pexels.com/photos/159711/book-books-education-literature-159711.jpeg"
      },
      {
        id: 2,
        title: "Ayatul Kursi Tafsiir",
        sheikh: "Sheikh Example",
        audio: "audio/kursi.mp3",
        image: "https://images.pexels.com/photos/532792/pexels-photo-532792.jpeg"
      },
      {
        id: 3,
        title: "Juz Amma (Part 1)",
        sheikh: "Sheikh Example",
        audio: "audio/juz1.mp3",
        image: "https://images.pexels.com/photos/243316/pexels-photo-243316.jpeg"
      },
      {
        id: 4,
        title: "Surah Yaasin Tafsiir",
        sheikh: "Sheikh Example",
        audio: "audio/yaasin.mp3",
        image: "https://images.pexels.com/photos/159711/book-books-education-literature-159711.jpeg"
      }
    ];

    const grid = document.getElementById("grid");
    const search = document.getElementById("search");
    const player = document.getElementById("player");
    const playPause = document.getElementById("playPause");
    const nowTitle = document.getElementById("nowTitle");
    const nowMeta = document.getElementById("nowMeta");

    const audio = new Audio();
    let currentId = null;

    function render(list) {
      grid.innerHTML = "";
      list.forEach(item => {
        const card = document.createElement("div");
        card.className =
          "bg-slate-900 border border-slate-800 rounded-xl p-2 flex flex-col gap-2";

        card.innerHTML = `
          <h3 class="text-sm font-semibold leading-tight min-h-[2.5rem]">
            ${item.title}
          </h3>

          <img
            src="${item.image}"
            class="rounded-lg aspect-[4/3] object-cover"
          />

          <button
            class="mt-1 text-xs text-primary border border-primary/30 rounded-full py-1"
          >
            ▶ Play
          </button>
        `;

        card.querySelector("button").onclick = () => play(item);
        grid.appendChild(card);
      });
    }

    function play(item) {
      if (currentId === item.id && !audio.paused) {
        audio.pause();
        return;
      }

      audio.src = item.audio;
      audio.play().catch(() => alert("Audio file not found"));
      currentId = item.id;

      nowTitle.textContent = item.title;
      nowMeta.textContent = item.sheikh;
      player.classList.remove("hidden");
    }

    playPause.onclick = () => {
      if (audio.paused) audio.play();
      else audio.pause();
    };

    audio.onplay = () => playPause.textContent = "⏸";
    audio.onpause = () => playPause.textContent = "▶";

    search.oninput = () => {
      const v = search.value.toLowerCase();
      render(data.filter(d => d.title.toLowerCase().includes(v)));
    };

    render(data);
  </script>

</body>
</html>
